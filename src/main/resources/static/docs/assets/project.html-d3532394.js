import{_ as e}from"./plugin-vue_export-helper-c27b6911.js";import{r as o,o as p,c as r,d as t,e as s,b as i,f as n}from"./app-ff93bfbc.js";const d={},u=n(`<p>在Auto.js Pro中，我们有时不仅需要运行单文件，还有运行项目的需求。所谓项目，就是一个包含配置、代码文件、资源文件（图片等）的文件夹。</p><p>在Auto.js Pro中可以在主页新建项目，有多种项目模块可供选择(Pro 8.7以上)。</p><h2 id="project-json" tabindex="-1"><a class="header-anchor" href="#project-json" aria-hidden="true">#</a> project.json</h2><p><code>project.json</code>文件用于配置项目的相关参数，比如主文件、启动图、包名等信息。</p><table><thead><tr><th>参数名称</th><th>意义</th><th>类型</th><th>默认值</th></tr></thead><tbody><tr><td>androidResources</td><td>安卓资源，参见<a href="#androidresources">androidResources</a></td><td>Object</td><td>{ &quot;resDir&quot;: &quot;res&quot;, &quot;manifest&quot;: &quot;AndroidManifest.xml&quot; }</td></tr><tr><td>build</td><td>自动生成的构建信息，无需修改，参见<a href="#build">build</a></td><td>Object</td><td></td></tr><tr><td>assets</td><td>保留字段，暂时没有作用</td><td>string[]</td><td>[]</td></tr><tr><td>encryptLevel</td><td>加密级别 0-不加密, 1-本地加密, 2-在线加密(仅在8.7以上版本支持)</td><td>number</td><td>0</td></tr><tr><td>icon</td><td>桌面图标</td><td>string</td><td>&quot;icons/icon.png&quot;</td></tr><tr><td>ignore</td><td>从VSCode中同步项目时的忽略文件，在Pro9.3以上版本被.autojs.sync.ignore文件代替</td><td>string[]</td><td>[&quot;build&quot;]</td></tr><tr><td>launchConfig</td><td>启动配置，参见<a href="#launchconfig">launchConfig</a></td><td>Object</td><td></td></tr><tr><td>main</td><td>入口文件</td><td>string</td><td>&quot;main.js&quot;</td></tr><tr><td>name</td><td>app名字</td><td>string</td><td>&quot;&quot;</td></tr><tr><td>optimization</td><td>优化配置，参见<a href="#optimization">optimization</a></td><td>Object</td><td></td></tr><tr><td>packageName</td><td>包名，必须符合Android包名规范，另外上传商店时包名必须唯一</td><td>string</td><td>&quot;&quot;</td></tr><tr><td>permissionConfig</td><td>权限配置，参见<a href="#permissionconfig">permissionConfig</a></td><td>Object</td><td>{ &quot;manifestPermissions&quot;: [], &quot;requestListOnStartup&quot;: [] }</td></tr><tr><td>publish</td><td>发布/上传商店配置，参见<a href="#publish">publish</a></td><td>Object</td><td></td></tr><tr><td>scripts</td><td>构建等时机自动触发运行的脚本配置，参见<a href="#scripts">scripts</a></td><td>Object</td><td></td></tr><tr><td>useFeatures</td><td>特性 <strong><code>continuation</code></strong> - 是否使用协程特性，参见示例-&gt;协程</td><td>string[]</td><td>[]</td></tr><tr><td>versionCode</td><td>版本号</td><td>number</td><td>1</td></tr><tr><td>versionName</td><td>给用户看的版本名称</td><td>string</td><td>&quot;1.0.0&quot;</td></tr></tbody></table><p>完整配置实例：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;androidResources&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;resDir&quot;</span><span class="token operator">:</span> <span class="token string">&quot;res&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;manifest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;AndroidManifest.xml&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;assets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;build_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;6F47F367-1&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;build_number&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;build_time&quot;</span><span class="token operator">:</span> <span class="token number">1615553004812</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;release&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;encryptLevel&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;useFeatures&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;res/icon.png&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;ignore&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;build&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;launchConfig&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;displaySplash&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;hideLogs&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;splashIcon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;res/splashIcon.png&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;splashLayoutXml&quot;</span><span class="token operator">:</span> <span class="token string">&quot;splash.xml&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;splashText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Powered by Auto.js Pro&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;stableMode&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;main.js&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Shape3.0&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;optimization&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;removeOpenCv&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;unusedResources&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;packageName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;com.suzy.rippledrawable&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;permissionConfig&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;manifestPermissions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;requestListOnStartup&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;publish&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;category&quot;</span><span class="token operator">:</span> <span class="token string">&quot;其他&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;details&quot;</span><span class="token operator">:</span> <span class="token string">&quot;控件描边、渐变、水波纹、文字渐变&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;maxAutoJsVersion&quot;</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;minAutoJsVersion&quot;</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;maxProVersion&quot;</span><span class="token operator">:</span> <span class="token number">8059999</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;minProVersion&quot;</span><span class="token operator">:</span> <span class="token number">8050000</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;minSdkVersion&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;permissions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;summary&quot;</span><span class="token operator">:</span> <span class="token string">&quot;控件描边、渐变、水波纹、文字渐变&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;tags&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> \\<span class="token punctuation">{</span>\\<span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;versionCode&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;versionName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最小配置实例：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;新建项目&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;main.js&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;ignore&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;build&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;packageName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;com.example&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;versionName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;versionCode&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="androidresources" tabindex="-1"><a class="header-anchor" href="#androidresources" aria-hidden="true">#</a> androidResources</h3><p>用于配置Android原生界面的参数，参见示例-&gt;复杂界面-&gt;Android 原生界面。</p><table><thead><tr><th>参数名称</th><th>意义</th><th>类型</th><th>默认值</th></tr></thead><tbody><tr><td>resDir</td><td>Android资源文件夹</td><td>string</td><td>&quot;res&quot;</td></tr><tr><td>manifest</td><td>AndroidManifest.xml的文件路径</td><td>string</td><td>&quot;AndroidManifest.xml&quot;</td></tr></tbody></table><h3 id="build" tabindex="-1"><a class="header-anchor" href="#build" aria-hidden="true">#</a> build</h3><p>自动生成的构建信息，包含构建时间、构建号等，请勿修改。</p><p>打包软件中，将根据这里的信息判断是否需要解压覆盖安装包的文件到数据路径。（每次打包后这里的信心会更新，因此安装后可以自动更新本地数据中的项目文件）</p><table><thead><tr><th>参数名称</th><th>意义</th><th>类型</th><th>默认值</th></tr></thead><tbody><tr><td>build_id</td><td>自动生成的构建id</td><td>string</td><td>&quot;&quot;</td></tr><tr><td>build_number</td><td>构建号，每次构建自增1</td><td>number</td><td>1</td></tr><tr><td>build_time</td><td>上次构建时间</td><td>number</td><td>当前13位时间戳</td></tr><tr><td>release</td><td>是否为打包后项目，为自动生成的字段，不需要修改</td><td>boolean</td><td>false</td></tr></tbody></table><h3 id="launchconfig" tabindex="-1"><a class="header-anchor" href="#launchconfig" aria-hidden="true">#</a> launchConfig</h3><p>打包后的相关启动配置。</p><table><thead><tr><th>参数名称</th><th>意义</th><th>类型</th><th>默认值</th></tr></thead><tbody><tr><td>displaySplash</td><td>打包后是否显示启动图（即使设置为false，打包后第一次也仍然会显示启动图）</td><td>boolean</td><td>true</td></tr><tr><td>hideLogs</td><td>打包后是否隐藏日志界面</td><td>boolean</td><td>false</td></tr><tr><td>splashIcon</td><td>打包后启动界面图标</td><td>string</td><td>&quot;icons/splashIcon.png&quot;</td></tr><tr><td>splashLayoutXml</td><td>启动图xml，用于打包后自定义启动图，参见示例-&gt;项目与打包-&gt;自定义启动图 (8.5以上版本)</td><td>string</td><td>&quot;splash.xml&quot;</td></tr><tr><td>splashText</td><td>打包后启动界面文本</td><td>string</td><td>&quot;Powered by Auto.js Pro&quot;</td></tr><tr><td>stableMode</td><td>打包后是否以稳定模式运行</td><td>boolean</td><td>false</td></tr></tbody></table><h3 id="permissionconfig" tabindex="-1"><a class="header-anchor" href="#permissionconfig" aria-hidden="true">#</a> permissionConfig</h3><blockquote><p>Pro 8.8.1新增</p></blockquote><p>自定义权限配置，包括应用打包后声明的权限列表和启动时自动申请的权限列表。</p><p>也可以在打包界面中使用权限配置修改。</p><table><thead><tr><th>参数名称</th><th>意义</th><th>类型</th><th>默认值</th></tr></thead><tbody><tr><td>manifestPermissions</td><td>打包后应用声明的权限列表。为了兼容旧版本配置，如果该字段为null则默认为122个自带权限。</td><td>string[]</td><td>null</td></tr><tr><td>requestListOnStartup</td><td>应用启动时自动申请的权限列表，权限务必包含在manifestPermissions中，否则会无法申请</td><td>string[]</td><td>[&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;]</td></tr></tbody></table>`,24),l={href:"https://developer.android.google.cn/reference/android/Manifest.permission",target:"_blank",rel:"noopener noreferrer"},c=n(`<h3 id="publish" tabindex="-1"><a class="header-anchor" href="#publish" aria-hidden="true">#</a> publish</h3><p>上传商店发布项目的相关配置。</p><table><thead><tr><th>参数名称</th><th>意义</th><th>类型</th><th>默认值</th></tr></thead><tbody><tr><td>maxAutoJsVersion</td><td>支持的最大autojs版本号</td><td>number</td><td>0</td></tr><tr><td>maxProVersion</td><td>支持的最大autojspro版本号</td><td>number</td><td>0</td></tr><tr><td>minAutoJsVersion</td><td>支持的最小autojs版本号</td><td>number</td><td>0</td></tr><tr><td>minProVersion</td><td>支持的最大autojspro版本号</td><td>number</td><td>0</td></tr><tr><td>minSdkVersion</td><td>支持的最小安卓版本</td><td>number</td><td>0</td></tr><tr><td>category</td><td>项目类别，用于发布在商店时作为分类</td><td>string</td><td>&quot;其他&quot;</td></tr><tr><td>details</td><td>项目详细描述，用于发布在商店时作为项目详情</td><td>string</td><td>&quot;&quot;</td></tr><tr><td>permissions</td><td>权限列表，比如&quot;root&quot;，暂时没有作用</td><td>string[]</td><td>[]</td></tr><tr><td>summary</td><td>脚本功能简介</td><td>string</td><td>&quot;&quot;</td></tr><tr><td>tags</td><td>脚本标签，由于商店还没有标签过滤功能，暂时没有作用</td><td>string[]</td><td>[]</td></tr></tbody></table><h3 id="optimization" tabindex="-1"><a class="header-anchor" href="#optimization" aria-hidden="true">#</a> optimization</h3><p>优化配置。目前用于打包时缩小体积。</p><table><thead><tr><th>参数名称</th><th>意义</th><th>类型</th><th>默认值</th></tr></thead><tbody><tr><td>removeOpenCv</td><td>不需要图色模块</td><td>boolean</td><td>false</td></tr><tr><td>unusedResources</td><td>不需要内置图标</td><td>boolean</td><td>false</td></tr></tbody></table><h2 id="ignore配置" tabindex="-1"><a class="header-anchor" href="#ignore配置" aria-hidden="true">#</a> ignore配置</h2><blockquote><p>Pro 8.7.6新增</p></blockquote><p>ignore配置文件类似于<code>.gitignore</code>，用于配置Auto.js Pro处理打包、加密等忽略的文件。</p><p>ignore文件的规则和<code>.gitignore</code>相同，比如：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># / 表示 当前文件所在的目录

# 忽略public下的所有目录及文件
/public/
#不忽略/public/assets，就是特例的意思，assets文件不忽略
!/public/assets

# 忽略具体的文件

index.js

# 忽略所有的js文件
*.js

# 忽略 a.js b.js
[ab].js

# 匹配规则和linux文件匹配一样
# 以斜杠“/”开头表示目录
# 以星号“*”通配多个字符
# 以问号“?”通配单个字符
# 以方括号“[]”包含单个字符的匹配列表
# 以叹号“!”表示不忽略(跟踪)匹配到的文件或目录
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="autojs-source-ignore" tabindex="-1"><a class="header-anchor" href="#autojs-source-ignore" aria-hidden="true">#</a> .autojs.source.ignore</h3><p>文件路径：项目文件夹下<code>.autojs.source.ignore</code>文件。</p><p>该文件配置的规则所匹配的文件，将不视为Auto.js Pro的JavaScript源码文件，不参与加密过程。</p><p>例如有些js文件是用于Web中加载的，不希望在打包时将其加密，可以配置该文件来忽略。</p><h3 id="autojs-build-ignore" tabindex="-1"><a class="header-anchor" href="#autojs-build-ignore" aria-hidden="true">#</a> .autojs.build.ignore</h3><p>文件路径：项目文件夹下<code>.autojs.build.ignore</code>文件。</p><p>该文件配置的规则所匹配的文件，将不参与Auto.js Pro的打包apk过程，最终生成的apk中，将不包含指定的文件。</p><p>例如有时node_modules仅在开发时使用，最终打包时已经通过webpack等工具打包为单文件，则可以配置忽略node_modules文件夹。</p><h3 id="autojs-sync-ignore" tabindex="-1"><a class="header-anchor" href="#autojs-sync-ignore" aria-hidden="true">#</a> .autojs.sync.ignore</h3><p>文件路径：项目文件夹下<code>.autojs.sync.ignore</code>文件。</p><p>该文件配置的规则所匹配的文件，在VSCode插件运行、同步、保存电脑上的文件时，将被忽略。仅适用于Pro 9.3以上版本。</p><h2 id="scripts" tabindex="-1"><a class="header-anchor" href="#scripts" aria-hidden="true">#</a> scripts</h2><p>scripts字段用于配置构建等时机自动执行的shell命令。例如：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;build-apk-pre-prepare&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sh build.sh&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以上配置将在打包apk前自动运行build.sh脚本，从而可以在打包前进行自定义的文件替换、混淆等。在这些shell命令中，你可以用<code>node build.js</code>来执行js文件（纯Node.js环境）；目前暂不支持执行Auto.js环境的js脚本。</p><p>目前支持以下时机：</p><h3 id="构建apk时触发" tabindex="-1"><a class="header-anchor" href="#构建apk时触发" aria-hidden="true">#</a> 构建apk时触发</h3><p>Auto.js Pro构建apk分为几个阶段：</p><ul><li>准备阶段：拷贝项目文件、apk文件，处理源文件等</li><li>构建阶段：执行aapt编译，添加内置图标包，修改并写入Manifest文件、处理插件等</li><li>优化阶段：移除无用资源、模块、混淆组件等</li><li>打包阶段：签名、压缩、清理工作空间等</li></ul><p>可以在不同阶段自定义要执行的sh脚本。在这些脚本中，可以通过以下环境变量获取信息：</p><ul><li><code>BUILD_APK_WORKSPACE</code>: 构建的临时工作区，也就是解压apk的临时项目</li><li><code>BUILD_APK_WORKSPACE_PROJECT</code>: 工作区下的项目文件夹，项目将会被复制到这里</li><li><code>BUILD_APK_OUTPUT</code>：apk的目标输出路径</li></ul><p>可以通过<code>pwd</code>等命令获取当前项目路径。</p><p>每个阶段对应的名称有：</p><ul><li><code>build-apk-pre-prepare</code>: 准备阶段前触发</li><li><code>build-apk-post-prepare</code>: 准确阶段后触发</li><li><code>build-apk-pre-build</code>: 构建阶段前触发</li><li><code>build-apk-post-build</code>: 构建阶段后触发</li><li><code>build-apk-pre-optimize</code>: 优化阶段前触发</li><li><code>build-apk-post-optimize</code>: 优化阶段后触发</li><li><code>build-apk-pre-package</code>: 打包阶段前触发</li><li><code>build-apk-post-package</code>: 打包阶段后触发</li></ul>`,35);function k(b,m){const a=o("ExternalLinkIcon");return p(),r("div",null,[u,t("p",null,[s("全部权限列表参见Android官方文档："),t("a",l,[s("Manifest.permission"),i(a)])]),c])}const q=e(d,[["render",k],["__file","project.html.vue"]]);export{q as default};
